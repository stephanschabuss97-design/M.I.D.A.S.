Umlaut/Ae-Oe-Ue Audit (JS/TS)

Section 1: Non-ASCII characters
app/core/boot-flow.js:4: * Description: Orchestriert den neuen Bootstrap-Funnel BOOT → AUTH_CHECK → INIT_CORE → INIT_MODULES → INIT_UI → IDLE.
app/core/boot-flow.js:185: const timeoutMessage = 'Boot hängt, bitte neu laden.';
app/core/diag.js:4: * Description: Sammelt und verwaltet UI- und Laufzeitdiagnosen, Fehleranzeigen und Performance-Metriken für App-Module.
app/core/diag.js:22: // Hinweis: Alle Fallback-Logs laufen über logDiagConsole, damit Tests/QA die Konsole komplett stummschalten können.
app/core/diag.js:243: entry.base = `[${stamp}] ${sevTag}${label}: ${entry.details.join(' • ')}`;
app/core/utils.js:4: * Description: Stellt universelle DOM-, Formatierungs- und Download-Helfer für M.I.D.A.S. bereit.
app/core/utils.js:11: *  - Vollständig rückwärtskompatibel zu window.AppModules.utils
app/core/utils.js:12: *  - Keine externen Abhängigkeiten; sicher für Monolith- und Modularbetrieb.
app/core/utils.js:25: // SUBMODULE: pad2 @public - füllt Zahlen links auf zwei Stellen mit Nullen
app/core/utils.js:40: // SUBMODULE: esc @public - ersetzt HTML-Sonderzeichen durch sichere Entitäten
app/core/utils.js:46: // SUBMODULE: nl2br @public - ersetzt Zeilenumbrüche durch <br>-Tags nach Escape
app/diagnostics/logger.js:4: * Description: Leichtgewichtiger Logger für das neue Diagnostics-Layer; sammelt Events, bevor die UI das neue Modul konsumiert.
app/diagnostics/logger.js:6: *  - buffer setup (Ringpuffer für Logs)
app/diagnostics/monitor.js:4: * Description: Platzhalter für spaetere Monitoring-Hooks (Touch-Log, Perf Overlay, Remote Dispatch); beobachtet die Diagnostics-Layer Flags.
app/diagnostics/perf.js:4: * Description: Per-Module Performance-Sampler (Readiness-Version) für das Diagnostics-Layer; ersetzt später die perfStats-Helpers aus app/core/diag.js.
app/modules/appointments/index.js:4: * Description: Termin-Panel mit Supabase-Anbindung (CRUD + Übersicht + Assistant-Snapshot)
app/modules/appointments/index.js:6: *  - Nutzt appointments_v2 (Phase 4.2). Fällt bei fehlender Config auf lokale Anzeige zurück.
app/modules/appointments/index.js:7: *  - Exponiert getUpcoming() für Assistant-Header.
app/modules/appointments/index.js:149: <span class="appointments-meta">${formatDateDisplay(appt.start_at)} • ${appt.time || '--:--'}</span>
app/modules/appointments/index.js:155: appt.repeatRule !== 'none' ? ` • Wiederholen: ${appt.repeatRule}` : ''
app/modules/appointments/index.js:160: ${appt.status === 'done' ? 'Zurücksetzen' : 'Erledigt'}
app/modules/appointments/index.js:162: <button class="btn ghost small" data-action="delete" type="button">Löschen</button>
app/modules/appointments/index.js:173: refs.overviewSubtitle.textContent = 'Noch keine Einträge.';
app/modules/appointments/index.js:176: refs.overviewSubtitle.textContent = `${state.items.filter((item) => item.status !== 'done').length} offene Termine • Insgesamt ${state.items.length}`;
app/modules/appointments/index.js:192: if (!client) throw new Error('Supabase Client nicht verfügbar');
app/modules/assistant-stack/assistant/actions.js:116: // Placeholder – UI wiring folgt in Phase 3.x
app/modules/assistant-stack/assistant/actions.js:294: : `Ich öffne ${normalized.label}.`);
app/modules/assistant-stack/assistant/actions.js:297: notify('Ich konnte das gewünschte Panel nicht öffnen.', 'warning');
app/modules/assistant-stack/assistant/actions.js:323: // TODO: Hier echtes UI-Highlighting verdrahten (CSS-Klasse, kurze Animation o.ä.).
app/modules/assistant-stack/assistant/actions.js:328: // Action Handlers – Conversation Flow
app/modules/assistant-stack/assistant/actions.js:335: // Kein direktes notify nötig – der sprachliche Teil kommt aus der KI.
app/modules/assistant-stack/assistant/actions.js:340: // TODO: Hier kannst du später den Voice-Loop explizit schließen (State reset etc.).
app/modules/assistant-stack/assistant/actions.js:341: notify('Das Gespräch ist beendet. Ich bin bereit, wenn du mich wieder brauchst.', 'info');
app/modules/assistant-stack/assistant/actions.js:346: // TODO: Textchat-Panel + Kamera öffnen.
app/modules/assistant-stack/assistant/actions.js:352: // TODO: Assistant-Textchat-Panel öffnen.
app/modules/assistant-stack/assistant/actions.js:357: // Action Handlers – Foodcoach / Vision
app/modules/assistant-stack/assistant/actions.js:375: notify(`Ich habe einen Vorschlag für "${label}" vorbereitet.`, 'info');
app/modules/assistant-stack/assistant/actions.js:379: // ConfirmIntake ist ein Wrapper um IntakeSave – entweder übernimmt er
app/modules/assistant-stack/assistant/actions.js:380: // direkt die Werte oder er greift auf den letzten Vorschlag zurück.
app/modules/assistant-stack/assistant/actions.js:383: // Standardfall: Payload enthält bereits intake_save-kompatible Felder.
app/modules/assistant-stack/assistant/actions.js:388: // Action Handlers – System Awareness
app/modules/assistant-stack/assistant/actions.js:406: parts.push('Netzwerkstatus nicht verfügbar');
app/modules/assistant-stack/assistant/actions.js:409: parts.push(hasSupabase ? 'Supabase-Client aktiv' : 'Supabase-Client nicht verfügbar');
app/modules/assistant-stack/assistant/actions.js:413: if (diag) parts.push('Diagnosedaten verfügbar');
app/modules/assistant-stack/assistant/actions.js:416: parts.push('Keine Systemdaten verfügbar.');
app/modules/assistant-stack/assistant/actions.js:419: notify(parts.join(' · '), 'info');
app/modules/assistant-stack/assistant/actions.js:432: notify('Ich habe den Touchlog geprüft.', 'info');
app/modules/assistant-stack/assistant/actions.js:445: notify('Ich habe die Diagnosedaten geprüft.', 'info');
app/modules/assistant-stack/assistant/actions.js:458: notify('Ich habe den Bootstrap-Status geprüft.', 'info');
app/modules/assistant-stack/assistant/actions.js:488: notify('Speichern nicht möglich – Supabase-API fehlt.', 'warning');
app/modules/assistant-stack/assistant/actions.js:509: notify('Speichern fehlgeschlagen – bitte später erneut versuchen.', 'warning');
app/modules/assistant-stack/assistant/actions.js:580: // Später kannst du das mit deinem echten UI-Toast verbinden.
app/modules/assistant-stack/assistant/actions.js:601: keys.sort(); // letzte Version = "höchster" Key
app/modules/assistant-stack/assistant/allowed-actions.js:5: * Zentraler Helper für KI-Actions (Whitelist + Guard Rails + Touchlog).
app/modules/assistant-stack/assistant/day-plan.js:42: lines.push(`Für Salz bleiben dir heute noch ${formatDiff(saltDiff, 'g')} Luft.`);
app/modules/assistant-stack/assistant/day-plan.js:44: lines.push(`Achte auf Salz – du liegst bereits ${formatDiff(Math.abs(saltDiff), 'g')} über deinem Limit.`);
app/modules/assistant-stack/assistant/day-plan.js:57: lines.push(`Protein: ${formatDiff(proteinDiff, 'g')} wären noch möglich.`);
app/modules/assistant-stack/assistant/day-plan.js:59: lines.push('Protein-Ziel erreicht – zusätzliche Portionen sind optional.');
app/modules/assistant-stack/assistant/day-plan.js:89: hasWarnings: lines.some((line) => /achte|übers|limit/i.test(line)),
app/modules/assistant-stack/assistant/index.js:134: const base = metrics.length ? metrics.join(' • ') : DEFAULT_SUMMARY_TEXT;
app/modules/assistant-stack/assistant/index.js:136: return metrics.length ? `${base} • ${reply}` : reply;
app/modules/assistant-stack/assistant/index.js:172: title: 'Analyse verfügbar',
app/modules/assistant-stack/assistant/session-agent.js:4: * SESSION AGENT — Core logic for the in-app MIDAS assistant.
app/modules/assistant-stack/assistant/session-agent.js:7: *  - Manage a short-lived assistant session (one interaction, ggf. 1–2 Rückfragen).
app/modules/assistant-stack/assistant/session-agent.js:11: *  - Keep NO persistent history beyond this JS object – caller entscheidet, wann wegwerfen.
app/modules/assistant-stack/assistant/session-agent.js:68: apiUrl = '/api/midas-assistant', // TODO: an deinen tatsächlichen Backend-Endpoint anpassen
app/modules/assistant-stack/assistant/session-agent.js:92: this.voiceLockMessage = 'Voice deaktiviert – bitte warten';
app/modules/assistant-stack/assistant/session-agent.js:129: console.warn('[MIDAS Assistant] sendUserMessage called on ended session – ignoring.');
app/modules/assistant-stack/assistant/session-agent.js:141: console.warn('[MIDAS Assistant] sendUserMessage while request pending – ignoring.');
app/modules/assistant-stack/assistant/session-agent.js:159: // 2) optional context (e.g. today’s intake, last BP, etc.)
app/modules/assistant-stack/assistant/session-agent.js:218: this.state.lastError = 'Interne Aktion konnte nicht ausgeführt werden.';
app/modules/assistant-stack/assistant/session-agent.js:236: * This does NOT call the backend – it’s purely local.
app/modules/assistant-stack/assistant/session-agent.js:248: * (one-way data flow – UI subscribed über onUpdate)
app/modules/assistant-stack/assistant/session-agent.js:319: * Factory helper – nice for external callers.
app/modules/assistant-stack/assistant/session-agent.js:328: * Generates a simple session id (not security-critical, nur für Korrelation).
app/modules/assistant-stack/assistant/suggest-store.js:6: * für den Butler-Layer.
app/modules/assistant-stack/voice/index.js:31: /tschüss/i,
app/modules/assistant-stack/voice/index.js:34: // --- Neue, fÇ¬r dich typische Varianten ---
app/modules/assistant-stack/voice/index.js:41: /passt fÇ¬r mich/i,
app/modules/assistant-stack/voice/index.js:47: /keine ahnung, passt/i,   // du sagst das Çôfter scherzhaft
app/modules/assistant-stack/voice/index.js:48: /das wÇÏrs?/i,
app/modules/assistant-stack/voice/index.js:66: /fürs erste passts/i,
app/modules/assistant-stack/voice/index.js:67: /für jetzt passts/i,
app/modules/assistant-stack/voice/index.js:384: setVoiceState('error', 'Voice deaktiviert – bitte warten');
app/modules/assistant-stack/voice/index.js:715: // Wenn das verschachtelte Objekt Actions enthlt, nutze sie nur, wenn oben nichts bertragen wurde.
app/modules/doctor-stack/charts/index.js:1: ﻿'use strict';
app/modules/doctor-stack/charts/index.js:4: * Description: Rendert SVG/Canvas-Charts für Blutdruck- und Körperdaten, inklusive KPI-Leiste und Tooltip-Logik.
app/modules/doctor-stack/charts/index.js:73: if (v < 65) return { color: "rgba(249,115,22,0.95)", label: "MAP 60–64 mmHg (Grenzwert)" };
app/modules/doctor-stack/charts/index.js:74: if (v <= 100) return { color: "rgba(34,197,94,0.95)", label: "MAP 65–100 mmHg (normal)" };
app/modules/doctor-stack/charts/index.js:75: if (v <= 110) return { color: "rgba(234,179,8,0.95)", label: "MAP 101–110 mmHg (hoch)" };
app/modules/doctor-stack/charts/index.js:82: if (v <= 29) return { color: "rgba(220,38,38,0.95)", label: "Pulsdruck ≤ 29 mmHg (sehr niedrig)" };
app/modules/doctor-stack/charts/index.js:83: if (v <= 50) return { color: "rgba(34,197,94,0.95)", label: "Pulsdruck 30–50 mmHg (normal)" };
app/modules/doctor-stack/charts/index.js:84: if (v <= 60) return { color: "rgba(234,179,8,0.95)", label: "Pulsdruck 51–60 mmHg (grenzwertig)" };
app/modules/doctor-stack/charts/index.js:85: if (v <= 70) return { color: "rgba(249,115,22,0.95)", label: "Pulsdruck 61–70 mmHg (hoch)" };
app/modules/doctor-stack/charts/index.js:86: return { color: "rgba(220,38,38,0.95)", label: "Pulsdruck ≥ 71 mmHg (kritisch)" };
app/modules/doctor-stack/doctor/index.js:4: * Description: Steuert die Arzt-Ansicht � l�dt Tagesdaten, verwaltet Sperrlogik (Unlock), Scrollstatus und Exportfunktionen.
app/modules/doctor-stack/doctor/index.js:8: *  - renderDoctor (Haupt-Renderer mit Zugriffsschutz, Scrollwiederherstellung und L�sch-Handling)
app/modules/doctor-stack/doctor/index.js:9: *  - renderDoctorDay (Template-Funktion f�r Tageskarten)
app/modules/doctor-stack/doctor/index.js:10: *  - exportDoctorJson (Exportfunktion f�r alle Gesundheitsdaten als JSON)
app/modules/doctor-stack/doctor/index.js:62: const extra = detail ? ` � ${detail}` : '';
app/modules/doctor-stack/doctor/index.js:234: return `${fmtDateDE(from)} � ${fmtDateDE(to)}`;
app/modules/doctor-stack/doctor/index.js:360: toast('Inbox ist derzeit nicht verf�gbar.');
app/modules/doctor-stack/doctor/index.js:522: fillAllPanels(placeholderHtml('Bitte Zeitraum w�hlen.'));
app/modules/doctor-stack/doctor/index.js:730: panels.inbox.innerHTML = placeholderHtml('Inbox �ffnet in einem separaten Fenster.');
app/modules/doctor-stack/doctor/index.js:773: <button class="btn ghost" data-del-bp="${day.date}">L�schen</button>
app/modules/doctor-stack/doctor/index.js:824: <button class="btn ghost" data-del-body="${day.date}">L�schen</button>
app/modules/doctor-stack/doctor/index.js:884: <button class="btn ghost" data-del-lab="${escapeAttr(entry.day || '')}">L�schen</button>
app/modules/doctor-stack/doctor/index.js:924: <button class="btn ghost" data-del-activity="${escapeAttr(dayValue)}">L�schen</button>
app/modules/doctor-stack/doctor/index.js:929: <div class="activity-col">Aktivit�t</div>
app/modules/doctor-stack/doctor/index.js:952: if (!confirm(`Alle ${label}-Eintr�ge f�r ${date} l�schen?`)) return;
app/modules/doctor-stack/doctor/index.js:956: btn.textContent = 'L�sche...';
app/modules/doctor-stack/doctor/index.js:960: alert(`Server-L�schung fehlgeschlagen (${result?.status || "?"}).`);
app/modules/doctor-stack/doctor/index.js:966: alert('Server-L�schung fehlgeschlagen (Fehler siehe Konsole).');
app/modules/doctor-stack/doctor/index.js:978: if (panels.body) panels.body.innerHTML = placeholderHtml('Keine K�rperdaten im Zeitraum.');
app/modules/doctor-stack/doctor/index.js:979: if (panels.inbox) panels.inbox.innerHTML = placeholderHtml('Inbox �ffnet in einem separaten Fenster.');
app/modules/doctor-stack/doctor/index.js:986: panels.body.innerHTML = bodyHtml || placeholderHtml('Keine K�rperdaten im Zeitraum.');
app/modules/doctor-stack/doctor/index.js:988: if (panels.inbox) panels.inbox.innerHTML = placeholderHtml('Inbox �ffnet in einem separaten Fenster.');
app/modules/doctor-stack/doctor/index.js:1009: bindDomainDeleteButtons(panels.body, 'data-del-body', 'body', 'K�rper');
app/modules/doctor-stack/doctor/index.js:1062: toast('Bitte Zeitraum w�hlen.');
app/modules/doctor-stack/doctor/index.js:1182: // SUBMODULE: doctorApi @internal - registriert �ffentliche API-Funktionen im globalen Namespace
app/modules/doctor-stack/doctor/index.js:1340: const summary = (report.summary || '').trim() || 'Kein Summary verf�gbar.';
app/modules/doctor-stack/doctor/index.js:1366: <button class="btn ghost" type="button" data-report-action="delete">L�schen</button>
app/modules/doctor-stack/doctor/index.js:1373: toast('Inbox ist derzeit nicht verf�gbar.');
app/modules/doctor-stack/doctor/index.js:1428: toast('Inbox kann derzeit nicht gel�scht werden.');
app/modules/doctor-stack/doctor/index.js:1431: if (!confirm('Inbox wirklich komplett l�schen?')) return;
app/modules/doctor-stack/doctor/index.js:1439: uiError?.('Inbox konnte nicht gel�scht werden.');
app/modules/doctor-stack/doctor/index.js:1507: toast('L�schen momentan nicht m�glich.');
app/modules/doctor-stack/doctor/index.js:1510: if (!confirm(`Diesen ${reportLabel} endg�ltig l�schen?`)) return;
app/modules/doctor-stack/doctor/index.js:1514: toast(`${reportLabel} gel�scht.`);
app/modules/doctor-stack/doctor/index.js:1518: uiError?.('L�schen fehlgeschlagen.');
app/modules/doctor-stack/doctor/index.js:1582: const err = new Error('Bitte Zeitraum w�hlen.');
app/modules/doctor-stack/doctor/index.js:1600: toast(`${reportLabel} ausgel�st - Inbox aktualisiert.`);
app/modules/hub/hub-aura3d.js:415: warn('Canvas missing – aura layer skipped.');
app/modules/hub/hub-aura3d.js:421: warn('Aura layer disabled via config – init skipped.');
app/modules/hub/hub-aura3d.js:425: warn('THREE.js not available – aura layer disabled.');
app/modules/hub/index.js:1186: warningText = 'Salz über Limit';
app/modules/hub/index.js:1189: warningText = warningText ? `${warningText}, Protein über Limit` : 'Protein über Limit';
app/modules/hub/index.js:1501: thumb.alt = 'Ausgewähltes Foto';
app/modules/hub/index.js:1752: return `Alles klar - ich habe ${list} für heute vorgemerkt.`;
app/modules/hub/index.js:1831: 'Soll ich dir basierend auf deinen heutigen Werten und dem nächsten Termin einen Essensvorschlag machen?';
app/modules/hub/index.js:1869: 'System: Du bist ein hilfreicher Ernährungsassistent fuer kurze Essensideen.',
app/modules/hub/index.js:1873: '- 1-2 kurze Vorschläge, insgesamt 2-4 Saetze.',
app/modules/hub/index.js:1875: '- Berücksichtige appointment_type und time_slot wenn vorhanden.',
app/modules/hub/index.js:2098: `[assistant-vision] foto zu groß: ${(file.size / (1024 * 1024)).toFixed(2)} MB`,
app/modules/hub/index.js:2100: appendAssistantMessage('system', `Das Foto ist zu groß (max. ca. ${maxMb} MB).`);
app/modules/hub/index.js:2416: : 'Analyse läuft ';
app/modules/hub/index.js:2422: message.resultText || (message.status === 'done' ? 'Keine Details verfügbar.' : 'Noch kein Ergebnis.');
app/modules/hub/index.js:2603: targetMessage.resultText = 'Analyse läuft ';
app/modules/intake-stack/intake/index.js:11: *  - Läuft weiterhin im Legacy-IIFE, exponiert API über `window.AppModules.capture`.
app/modules/intake-stack/intake/index.js:82: const extra = detail ? ` – ${detail}` : '';
app/modules/intake-stack/intake/index.js:135: `Bestand: ${med.stock_count ?? '?'} Stück (${med.days_left ?? '?'} Tage).`,
app/modules/intake-stack/intake/index.js:136: `Dosis pro Tag: ${med.dose_per_day ?? '?'} Stück`,
app/modules/intake-stack/intake/index.js:139: 'Bitte um neues Rezept bzw. Rückmeldung.',
app/modules/intake-stack/intake/index.js:309: listEl.innerHTML = '<p class="muted small">Keine aktiven Medikamente für diesen Tag.</p>';
app/modules/intake-stack/intake/index.js:318: const daysLeft = Number.isFinite(med.days_left) ? `${med.days_left} Tage übrig` : '';
app/modules/intake-stack/intake/index.js:322: const btnLabel = med.taken ? 'Bestätigt' : 'Einnahme bestätigen';
app/modules/intake-stack/intake/index.js:349: uiError('Medikationsmodul nicht verfügbar.');
app/modules/intake-stack/intake/index.js:353: uiError('Bitte anmelden, um Medikamente zu bestätigen.');
app/modules/intake-stack/intake/index.js:363: ? global.confirm(`${medName} wurde heute bereits bestätigt. Rückgängig machen?`)
app/modules/intake-stack/intake/index.js:371: uiInfo('Einnahme zurückgenommen.');
app/modules/intake-stack/intake/index.js:375: uiInfo('Einnahme bestätigt.');
app/modules/intake-stack/intake/index.js:394: uiError('Medikationsmodul nicht verfügbar.');
app/modules/intake-stack/intake/index.js:441: listEl.innerHTML = '<p class="muted small">Medikamente werden geladen …</p>';
app/modules/intake-stack/intake/index.js:696: uiError?.('Intake konnte nicht automatisch zurückgesetzt werden. Bitte erneut versuchen.');
app/modules/intake-stack/intake/index.js:1199: if (s > LS_SALT_MAX) status = ' * über Ziel';
app/modules/intake-stack/intake/index.js:1207: else if (p > 90) status = ' * über Ziel';
app/modules/intake-stack/medication/index.js:684: `Medikament ${entry.name || ''} dauerhaft löschen? Diese Aktion kann nicht rueckgaengig gemacht werden.`
app/modules/intake-stack/medication/index.js:729: ${escapeHtml([med.ingredient, med.strength].filter(Boolean).join(' • ') || 'Keine Details')}
app/modules/intake-stack/medication/index.js:745: Löschen
app/modules/profile/index.js:121: if (!client) throw new Error('Supabase Client nicht verfÜgbar');
app/modules/profile/index.js:169: if (Number.isFinite(med.dose_per_day)) detail.push(`${med.dose_per_day}×/Tag`);
app/modules/profile/index.js:201: refs.ckdBadge.value = stage || '—';
app/modules/profile/index.js:240: if (value == null || value === '') return '—';
app/modules/profile/index.js:256: ['Größe (cm)', state.data.height_cm],
app/modules/profile/index.js:258: ['Medikation', Array.isArray(state.data.medications) ? state.data.medications.join(', ') : '—'],
app/modules/profile/index.js:269: ['Aktualisiert', state.data.updated_at ? new Date(state.data.updated_at).toLocaleString('de-AT') : '—'],
app/modules/vitals-stack/vitals/body.js:1: ﻿'use strict';
app/modules/vitals-stack/vitals/body.js:4: * Description: Verarbeitet Körperdaten und Tageszusammenfassungen inkl. Validierung und automatischer UI-Synchronisierung.
app/modules/vitals-stack/vitals/body.js:140: // SUBMODULE: prefillBodyInputs @internal - lädt letzte Körperwerte und füllt Eingabefelder vor
app/modules/vitals-stack/vitals/body.js:179: // SUBMODULE: API export & global attach @internal - registriert öffentliche Methoden und erweitert AppModules.body
app/modules/vitals-stack/vitals/bp.js:1: ﻿'use strict';
app/modules/vitals-stack/vitals/bp.js:6: *  - requiresBpComment (public, Kommentar-Pflichtprüfung)
app/modules/vitals-stack/vitals/bp.js:247: // SUBMODULE: API export & global attach @internal - registriert Ã¶ffentliche Methoden unter AppModules.bp
app/modules/vitals-stack/vitals/lab.js:86: uiError?.(`${label} ist ungültig (${min}–${max}).`);
app/supabase/api/intake.js:4: * Description: Verwaltet Wasser-, Salz- und Protein-Intake über Supabase REST- oder RPC-Endpunkte mit Fallback-Logik.
app/supabase/api/intake.js:6: *  - imports (Core-, Auth- und HTTP-Abhängigkeiten)
app/supabase/api/intake.js:12: *  - cleanupOldIntake (alte Einträge bereinigen)
app/supabase/api/intake.js:15: // SUBMODULE: imports @internal - API- und Core-Abhängigkeiten
app/supabase/api/intake.js:69: // SUBMODULE: loadIntakeToday @public - lädt Intake-Daten für den aktuellen Tag (REST-Query)
app/supabase/api/intake.js:255: // SUBMODULE: cleanupOldIntake @public - löscht alte Intake-Einträge (vor aktuellem Tag)
app/supabase/api/notes.js:4: * Description: Synchronisiert Notizen mit Supabase über REST (POST, PATCH, DELETE) inklusive Fallback-Handling.
app/supabase/api/notes.js:6: *  - imports (Core-, Auth- und UI-Abhängigkeiten)
app/supabase/api/notes.js:9: *  - fallback-note (PATCH-Fallback für note)
app/supabase/api/notes.js:10: *  - appendNoteRemote (fügt Text an bestehende Notiz an)
app/supabase/api/notes.js:11: *  - deleteRemote (löscht einzelnen Remote-Eintrag)
app/supabase/api/notes.js:12: *  - deleteRemoteDay (löscht alle Einträge eines Tages)
app/supabase/api/notes.js:13: *  - deleteRemoteByType (löscht alle Einträge eines Tages für einen bestimmten Typ)
app/supabase/api/notes.js:16: // SUBMODULE: imports @internal - Supabase Core-, Auth- und UI-Abhängigkeiten
app/supabase/api/notes.js:82: // SUBMODULE: syncWebhook @public - sendet lokale Einträge an Supabase (inkl. Fallback-Handling)
app/supabase/api/notes.js:177: // SUBMODULE: appendNoteRemote @public - fügt neuen Notiztext an bestehenden Tageskommentar an
app/supabase/api/notes.js:243: // SUBMODULE: deleteRemote @public - löscht einzelnen Datensatz anhand Remote-ID
app/supabase/api/notes.js:259: // SUBMODULE: deleteRemoteDay @public - löscht alle Remote-Einträge eines angegebenen Tages
app/supabase/api/notes.js:283: // SUBMODULE: deleteRemoteByType @public - löscht alle Remote-Einträge eines Tages innerhalb eines Typs
app/supabase/api/push.js:4: * Description: Überträgt lokale Pending-Einträge (health_events) per Webhook an Supabase; behandelt Fehler, Auth-Abbrüche und Response-Validierung.
app/supabase/api/push.js:6: *  - imports (Core- und Auth-Abhängigkeiten)
app/supabase/api/push.js:9: *  - REMOTE_ID_NO_EVENTS (Sentinel für leere Events)
app/supabase/api/push.js:12: *  - pushPendingToRemote (Hauptfunktion: sendet Pending-Einträge)
app/supabase/api/push.js:28: // SUBMODULE: delay @internal - asynchrone Wartehilfe für schrittweise Übertragung
app/supabase/api/push.js:43: // SUBMODULE: logPushError @internal - zentrales Logging für Push-Fehler
app/supabase/api/push.js:56: // SUBMODULE: pushPendingToRemote @public - überträgt alle Pending-Einträge an Supabase (POST → updateEntry)
app/supabase/api/select.js:4: * Description: Führt autorisierte, generische REST-Abfragen auf Supabase-Tabellen aus (mit Filter-, Order- und Limit-Unterstützung).
app/supabase/api/select.js:6: *  - imports (Core- und Auth-Abhängigkeiten)
app/supabase/api/select.js:8: *  - sbSelect (Hauptfunktion für dynamische REST-Abfragen)
app/supabase/api/select.js:11: // SUBMODULE: imports @internal - REST- und Auth-Abhängigkeiten
app/supabase/api/system-comments.js:1: ﻿'use strict';
app/supabase/api/system-comments.js:4: * Description: Schreibt und aktualisiert system_comment-Einträge (Trendpilot etc.) in der Tabelle health_events.
app/supabase/api/system-comments.js:33: warning: 'Trendpilot: leichter Aufwärtstrend – bitte beobachten.',
app/supabase/api/system-comments.js:34: critical: 'Trendpilot: deutlicher Anstieg – ärztliche Abklärung empfohlen.'
app/supabase/api/vitals.js:4: * Description: Aggregiert Vitaldaten aus Supabase-Views (Blutdruck, Körperwerte, Notizen) zu einer konsolidierten Tagesübersicht.
app/supabase/api/vitals.js:6: *  - imports (Core- und Query-Abhängigkeiten)
app/supabase/api/vitals.js:10: *  - loadBodyFromView (Körperwerte)
app/supabase/api/vitals.js:14: *  - fetchDailyOverview (Hauptschnittstelle für Übersicht)
app/supabase/api/vitals.js:70: // SUBMODULE: loadBodyFromView @public - liest Körperdaten aus v_events_body
app/supabase/api/vitals.js:232: // SUBMODULE: fetchDailyOverview @public - Hauptschnittstelle für Tagesübersicht
app/supabase/auth/core.js:4: * Description: Steuert Authentifizierungszustand, Session-Prüfung, Hooks und Grace-Period-Handling für Supabase-Login.
app/supabase/auth/core.js:11: *  - Hook-Call-Handler (sichere Hook-Ausführung)
app/supabase/auth/core.js:13: *  - requireSession (Session-Prüfung)
app/supabase/auth/core.js:106: // SUBMODULE: fallbackUserId @internal - Rückfall bei Fehlern/Timeouts
app/supabase/auth/core.js:125: // SUBMODULE: authHooks @internal - Hook-Verwaltung für UI/Status
app/supabase/auth/core.js:133: // SUBMODULE: Hook-Call-Handler @internal - sichere Ausführung aller Hook-Typen
app/supabase/auth/core.js:354: // SUBMODULE: requireSession @public - prüft aktuelle Session und aktualisiert UI
app/supabase/auth/core.js:382: // SUBMODULE: isLoggedInFast @public - schnelle Login-Prüfung mit Timeout
app/supabase/auth/core.js:455: // SUBMODULE: afterLoginBoot @public - führt Initialisierung nach Login aus
app/supabase/auth/core.js:530: // SUBMODULE: initAuth @public - setzt optionale Hook-Handler für UI & Status
app/supabase/auth/guard.js:25: *  - authGuardState (Getter/Setter für Lock-Status)
app/supabase/auth/guard.js:43: // SUBMODULE: config accessors @internal - Wrapper für getConf / putConf aus globalWindow
app/supabase/auth/guard.js:68: // SUBMODULE: state @internal - interne Flags für Lock-Zustände
app/supabase/auth/guard.js:187: // SUBMODULE: constants @internal - interne Schlüssel & Parameter für Lock-State
app/supabase/auth/guard.js:197: // SUBMODULE: WebAuthn helpers @internal - Prüft Verfügbarkeit & Domainauflösung
app/supabase/auth/guard.js:546: // SUBMODULE: requireDoctorUnlock @public - prüft Login & startet Entsperr-Workflow (PIN/Passkey)
app/supabase/auth/guard.js:596: // SUBMODULE: resumeAfterUnlock @public - führt nach Entsperrung die vorgesehene Aktion aus
app/supabase/auth/guard.js:672: setLockMsg('WebAuthn wird von diesem Gerät nicht unterstützt.');
app/supabase/auth/guard.js:889: // SUBMODULE: authGuardState @public - Getter/Setter für Lock-Zustände
app/supabase/auth/index.js:4: * Description: Zentraler Barrel für Authentifizierungs-Module (Core, UI, Guard) zur Bereitstellung eines einheitlichen Import-Points.
app/supabase/auth/ui.js:8: *  - config accessors (Wrapper für getConf / putConf)
app/supabase/auth/ui.js:9: *  - restErrorMessage (Fallback für REST-Fehlermeldungen)
app/supabase/auth/ui.js:11: *  - prefillSupabaseConfigForm (Initialwert-Handling für REST/Key-Felder)
app/supabase/auth/ui.js:14: *  - show/hide overlay (öffentliche Steuerfunktionen)
app/supabase/auth/ui.js:16: *  - bindAuthButtons (Button-Bindings für Config & Google-OAuth)
app/supabase/auth/ui.js:32: // SUBMODULE: config accessors @internal - sichere Wrapper für getConf / putConf
app/supabase/auth/ui.js:80: // SUBMODULE: prefillSupabaseConfigForm @public - liest gespeicherte REST/Key-Werte ein und befüllt das Formular
app/supabase/core/client.js:4: * Description: Initialisiert und verwaltet den Supabase-Client, prüft Konfiguration, sichert Auth-Setup und verhindert service_role Keys.
app/supabase/core/client.js:8: *  - safe accessors (sichere Wrapper für window.getConf / setConfigStatus)
app/supabase/core/client.js:9: *  - maskUid (PII-Schutz für User-IDs)
app/supabase/core/client.js:10: *  - setSupabaseDebugPii (Debug-Flag für Logging sensibler Daten)
app/supabase/core/client.js:13: *  - ensureSupabaseClient (Client-Erstellung mit Sicherheitsprüfungen)
app/supabase/core/client.js:52: // SUBMODULE: maskUid @public - schützt User-IDs vor vollständigem Logging
app/supabase/core/client.js:75: // SUBMODULE: isServiceRoleKey @public - prüft JWT-Payload auf service_role
app/supabase/core/http.js:4: * Description: Führt zentrale Fetch- und Authentifizierungslogik für Supabase-REST-Aufrufe mit Retry, Header-Cache und Timeout durch.
app/supabase/core/http.js:12: *  - Verwendet Diagnose-Logging über window.diag.
app/supabase/core/http.js:13: *  - Unterstützt automatisches Session-Refresh bei 401/403.
app/supabase/core/http.js:14: *  - Enthält Kurzzeit-Timeout für hängende Requests (10s).
app/supabase/core/http.js:102: const suffix = detail ? ` – ${detail}` : '';
app/supabase/core/http.js:107: // SUBMODULE: util @internal - Sleep-Helper für Backoff-Zeiten
app/supabase/core/http.js:129: // SUBMODULE: fetchWithAuth @public - führt REST-Aufrufe mit Auth-Headern, Session-Refresh und Retry-Logik aus
app/supabase/core/http.js:167: // Request-Ausführung mit Timeout und Wiederholungen
app/supabase/core/state.js:7: *  - header cache utilities (Cache- und Promise-Verwaltung für Auth-Header)
app/supabase/core/state.js:9: *  - Kein persistenter Speicher; ausschließlich flüchtige Laufzeitdaten.
app/supabase/index.js:12: *  - Prüft doppelte Exporte und protokolliert Konflikte.
app/supabase/index.js:162: // SUBMODULE: notifySupabaseReady @internal - löst CustomEvent 'supabase:ready' aus
app/supabase/index.js:187: // SUBMODULE: enqueueReadyDispatch @internal - führt Eventdispatch asynchron (microtask-basiert) aus
app/supabase/index.js:196: // SUBMODULE: scheduleSupabaseReady @internal - markiert SupabaseAPI als bereit und löst Event zum passenden Zeitpunkt aus
app/supabase/realtime/index.js:4: * Description: Realtime-Wrapper mit Resume-/Recovery-Flow, bindet Auth & UI-State nach App-Hintergrundaktivität neu.
app/supabase/realtime/index.js:9: *  - resumeState (Zustandsverwaltung für Resume-Flow)
app/supabase/realtime/index.js:12: *  - setupRealtime / teardownRealtime / resumeFromBackground / toEventsUrl (öffentliche API)
app/supabase/realtime/index.js:14: *  - Hybrid-kompatibel: nutzt vorhandene window.*-Funktionen, fällt bei Bedarf auf native JS zurück.
app/supabase/realtime/index.js:19: // SUBMODULE: imports @internal - bindet Auth-Abhängigkeiten für Grace-Handling
app/supabase/realtime/index.js:27: // SUBMODULE: defaults @internal - Fallbacks für Legacy-Kompatibilität
app/supabase/realtime/index.js:275: // SUBMODULE: resumeFromBackground @public - öffentlicher Resume-Trigger (Proxy für resumeFromBackgroundInternal)
assets/js/boot-auth.js:70: // Initial guard während Supabase entscheidet
assets/js/data-local.js:4: * Description: Verwaltet lokale IndexedDB-Operationen und Konfigurationsspeicher für Healthlog-Einträge und Einstellungen.
assets/js/data-local.js:7: *  - ensureDbReady (Initialisierungsprüfung)
assets/js/data-local.js:13: *  - addEntry / updateEntry / getAllEntries / getEntryByRemoteId / deleteEntryLocal (CRUD für Einträge)
assets/js/data-local.js:98: // SUBMODULE: ensureDbReady @internal - prüft ob Datenbank initialisiert ist
assets/js/data-local.js:121: // SUBMODULE: wrapIDBRequest @internal - generischer Handler für IDB Request/Transaktions-Fluss
assets/js/data-local.js:230: // für Writes: resolveOn 'request' genügt; tx-Handler fungieren als Fallback
assets/js/data-local.js:260: // SUBMODULE: getTimeZoneOffsetMs @internal - berechnet Zeitzonenoffset für Mitternachtstransformation
assets/js/data-local.js:314: // SUBMODULE: addEntry @public - fügt lokalen Eintrag hinzu
assets/js/data-local.js:333: // Im onSuccess des GET: wenn vorhanden, PUT ausführen; wenn nicht, tx.abort()
assets/js/data-local.js:338: onAbortResolve: false, // „not found“ führt zu Abort -> liefere false
assets/js/data-local.js:346: // Wert, der bei tx.oncomplete zurückkommt:
assets/js/data-local.js:352: // SUBMODULE: getAllEntries @public - gibt alle Einträge aus Store zurück
assets/js/data-local.js:377: // SUBMODULE: deleteEntryLocal @public - löscht lokalen Eintrag
assets/js/format.js:4: * Description: Formatiert Messwerte, berechnet medizinisch plausible Kennzahlen und mappt Capture-Einträge auf Health-Events-Strukturen.
assets/js/format.js:46: // SUBMODULE: calcMAP @public - berechnet mittleren arteriellen Druck (MAP) mit Plausibilitätsprüfung
assets/js/format.js:52: // Medizinische Plausibilitätsprüfung
assets/js/format.js:65: // SUBMODULE: toHealthEvents @public - mappt Capture-Eintrag auf Health-Event-Payloads für REST-Sync
assets/js/format.js:92: // Körperwerte, Labor & Notizen
assets/js/format.js:147: // SUBMODULE: isWeightOnly @public - erkennt reine Gewichts-Einträge ohne Vitaldaten
assets/js/main.js:18: // SUBMODULE: getSupabaseApi @internal - prüft SupabaseAPI-Verfügbarkeit und loggt fehlende Instanz
assets/js/main.js:24: logBootDiag('Supabase (AppModules.supabase) nicht geladen – prüfe app/supabase/index.js / Script-Reihenfolge.');
assets/js/main.js:73: const suffix = detail ? ` – ${detail}` : '';
assets/js/main.js:84: const suffix = detail ? ` – ${detail}` : '';
assets/js/main.js:96: const suffix = detail ? ` – ${detail}` : '';
assets/js/main.js:181: // SUBMODULE: createSupabaseFn @internal - erstellt sichere Wrapper für Supabase-Funktionsaufrufe
assets/js/main.js:222: // SUBMODULE: getAuthGuardState / setAuthPendingAfterUnlock @internal - verwaltet Auth-Zustände zwischen Unlock-Phasen
assets/js/main.js:237: // SUBMODULE: waitForSupabaseApi @public - wartet auf Supabase-Initialisierung über Polling + Event
assets/js/main.js:1626: activityFormStatus.textContent = 'Aktivität ist Pflicht.';
assets/js/main.js:1731: uiError?.('Monatsbericht-Generator wird in Kürze aktiviert.');
assets/js/main.js:1816: touchLog('[resume] skipped – voice gate locked');
assets/js/ui-errors.js:6: *  - restErrorMessage (HTTP → Nutzertext Mapping)
assets/js/ui-errors.js:10: *  - Hybrid-Kompatibilität (AppModules + globale Fallbacks)
assets/js/ui-errors.js:11: *  - Minimalistisch gehalten; keine visuelle Abhängigkeit außer uiError()
assets/js/ui-errors.js:20: if (status === 0) return 'Netzwerkfehler – bitte Verbindung prüfen.';
assets/js/ui-errors.js:24: if (status === 400 || status === 422) return 'Eingaben bitte prüfen.';
assets/js/ui-errors.js:25: if (status === 429) return 'Zu viele Anfragen – bitte kurz warten.';
assets/js/ui-errors.js:26: if (status >= 500) return 'Serverfehler – bitte später erneut versuchen.';
assets/js/ui-errors.js:47: // SUBMODULE: withBusy @public - toggelt Disabled-State für Buttons
assets/js/ui-layout.js:8: *  - bindAutoFocusScroll (Event-Handler für focusin)
assets/js/ui-layout.js:9: *  - bindResizeEvents (Reaktion auf Layoutänderungen)
assets/js/ui-layout.js:19: // SUBMODULE: updateStickyOffsets @public - setzt CSS-Variablen für Header- und Tab-Höhen
assets/js/ui-tabs.js:4: * Description: Steuert Tabwechsel, Header-Schatten und Auth-Locks (Doctor-Unlock) über UI-Events und Zustandssperren.
assets/js/ui-tabs.js:12: *  - Hybrid-kompatibel über window.AppModules und globale Fallbacks.
assets/js/ui-tabs.js:49: throw err; // ← Fehler wird jetzt propagiert
assets/js/ui-tabs.js:63: // Unlock bei gesperrter UI zurücksetzen
assets/js/ui-tabs.js:82: if (s.doctorUnlocked) return false;       // schon offen → kein Prompt
assets/js/ui-tabs.js:85: return true;                              // Prompt nötig
assets/js/ui-tabs.js:156: // SUBMODULE: bindHeaderShadow @public - fügt Header/Tabs Schatten bei Scroll hinzu
assets/js/ui.js:1: ﻿'use strict';
assets/js/ui.js:7: *  - debounce (zeitverzögerte UI-Aktionen)
assets/js/ui.js:11: *  - Verhalten beibehalten; verbessert durch Coderabbit-Fixes für Fokus, Cache, Beobachter und Attribute.
assets/js/ui.js:99: // SUBMODULE: debounce @public - begrenzt häufige Funktionsaufrufe (UI-Optimierung)
assets/js/ui.js:111: // SUBMODULE: setUnderlayInert @public - deaktiviert Hintergrundelemente während Modals aktiv sind
assets/js/ui.js:160: // SUBMODULE: focusTrap @public - schränkt Tab-Fokus auf aktives Modal ein, inkl. MutationObserver-Caching
assets/js/ui.js:213: // direct invalidation: cache holds only roots → delete by root
assets/js/ui.js:220: // Attribute-Änderungen, die die Fokusfähigkeit typischerweise beeinflussen:
assets/js/ui.js:303: // SUBMODULE: legacy globals @internal - definiert globale read-only Zugriffe für Abwärtskompatibilität

Section 2: ae/oe/ue in strings/comments
app/core/boot-flow.js:71: panel.setAttribute('aria-hidden', isError ? 'false' : 'true');
app/core/boot-flow.js:141: body.setAttribute('aria-busy', currentStage === 'IDLE' ? 'false' : 'true');
app/core/capture-globals.js:29: var __intakeResetDoneFor = null; // Tag, fuer den Reset bereits gelaufen ist (pro Tab)
app/core/capture-globals.js:34: // always observe the current value even when re-assigned later.
app/core/capture-globals.js:87: // accessors for mutable primitives/timers (use getters to read current value)
app/core/config.js:18: if (normalized === 'true' || normalized === '1') return true;
app/core/config.js:70: global.document.body.dataset.bootStageDebug = 'true';
app/core/pwa.js:23: updateBanner.setAttribute('aria-hidden', 'true');
app/core/pwa.js:46: installBanner.setAttribute('aria-hidden', 'true');
app/core/pwa.js:105: banner.setAttribute('aria-hidden', isOffline ? 'false' : 'true');
app/core/utils.js:15: // SUBMODULE: domQuery @public - schnelle DOM-Selektoren im Stil von jQuery
app/core/utils.js:36: // SUBMODULE: timeStr @public - liefert aktuelle Uhrzeit im Format HH:MM
app/modules/assistant-stack/assistant/actions.js:267: new CustomEvent('assistant:voice-request', {
app/modules/assistant-stack/assistant/actions.js:286: logInfo(`OpenModule requested (${normalized.debug})`);
app/modules/assistant-stack/assistant/actions.js:304: logInfo('ShowStatus requested');
app/modules/assistant-stack/assistant/actions.js:307: notify('Ich pr?fe deinen aktuellen Status.', 'info');
app/modules/assistant-stack/assistant/actions.js:321: logInfo('Highlight requested');
app/modules/assistant-stack/assistant/actions.js:392: logInfo('SystemStatus requested');
app/modules/assistant-stack/assistant/actions.js:404: parts.push(online ? 'Online-Verbindung vorhanden' : 'Der Browser ist aktuell offline');
app/modules/assistant-stack/assistant/actions.js:423: logInfo('ReadTouchlog requested');
app/modules/assistant-stack/assistant/actions.js:436: logInfo('ReadDiagnostics requested');
app/modules/assistant-stack/assistant/actions.js:449: logInfo('ReadBootstrapStatus requested');
app/modules/assistant-stack/assistant/actions.js:485: logInfo('IntakeSave requested');
app/modules/assistant-stack/assistant/session-agent.js:53: * @property {() => boolean} [isVoiceReady]        // optional gate: returns true when voice UI may run
app/modules/assistant-stack/assistant/session-agent.js:141: console.warn('[MIDAS Assistant] sendUserMessage while request pending – ignoring.');
app/modules/assistant-stack/assistant/suggest-store.js:65: const queueSuggestion = (payload, { reason = 'enqueue' } = {}) => {
app/modules/assistant-stack/assistant/suggest-store.js:72: dispatch('assistant:suggest-queued', {
app/modules/assistant-stack/vad/vad.js:54: diag.add?.('[vad] stop due to voice gate lock');
app/modules/assistant-stack/voice/index.js:13: listening: 'Ich hoere zu',
app/modules/assistant-stack/voice/index.js:34: // --- Neue, fÇ¬r dich typische Varianten ---
app/modules/assistant-stack/voice/index.js:127: voiceCtrl.button.setAttribute('aria-disabled', status.allowed ? 'false' : 'true');
app/modules/assistant-stack/voice/index.js:156: if (voiceCtrl.button.dataset.voiceBound === 'true') return;
app/modules/assistant-stack/voice/index.js:157: voiceCtrl.button.dataset.voiceBound = 'true';
app/modules/doctor-stack/charts/index.js:22: /* Fallbacks nur, wenn extern nicht verfuegbar */
app/modules/doctor-stack/charts/index.js:107: // SUBMODULE: chartPanel controller @extract-candidate - steuert Panel-Lifecycle, Datenbeschaffung und Zeichnung
app/modules/doctor-stack/charts/index.js:167: // ARIA Live-Region (nur Text, fuer Screenreader)
app/modules/doctor-stack/charts/index.js:186: // Interaktivitaet
app/modules/doctor-stack/charts/index.js:269: // SUBMODULE: chartPanel.show @internal - oeffnet Panel und aktiviert focusTrap
app/modules/doctor-stack/charts/index.js:290: // SUBMODULE: chartPanel.getFiltered @extract-candidate - aggregiert Cloud/Local Daten fuer Zeichnung
app/modules/doctor-stack/charts/index.js:318: // Fuer die Chart-Logik bauen wir flache "entry"-aehnliche Objekte
app/modules/doctor-stack/charts/index.js:410: // Hoehe laden (Konfig oder Fallback 183 cm)
app/modules/doctor-stack/charts/index.js:411: // SUBMODULE: chartPanel.getHeightCm @internal - liest Nutzerkoerpergroesse aus Supabase/Lokal
app/modules/doctor-stack/charts/index.js:451: // SUBMODULE: chartPanel.setHoverSeries @internal - hebt aktuelle Serie in Chart/Legende hervor
app/modules/doctor-stack/charts/index.js:506: const valueLabel = (tgt.getAttribute("data-value-label") || "").trim();
app/modules/doctor-stack/charts/index.js:548: const valueClass = isLight ? "chart-tip-metric-value is-contrast" : "chart-tip-metric-value";
app/modules/doctor-stack/charts/index.js:550: ? `<span class="chart-tip-indicator" style="background:${esc(indicator.color)}" title="${esc(indicator.label || "")}" aria-hidden="true"></span>`
app/modules/doctor-stack/charts/index.js:552: const html = `<div class="chart-tip-value chart-tip-metric">${indicatorHtml}<span class="${labelClass}">${esc(label)}</span><span class="${valueClass}">${esc(valueText)}</span></div>`;
app/modules/doctor-stack/charts/index.js:554: liveParts.push(`${label} ${valueText}${indicator?.label ? ` (${indicator.label})` : ""}`);
app/modules/doctor-stack/charts/index.js:583: parts.push(`<div class="chart-tip-value">${esc(txt)}</div>`);
app/modules/doctor-stack/charts/index.js:588: parts.push(`<div class="chart-tip-value">${esc(valueLabel)}</div>`);
app/modules/doctor-stack/charts/index.js:639: return `${value}`.replace(/[^a-zA-Z0-9_-]/g, "\\$&");
app/modules/doctor-stack/charts/index.js:883: if (v < 30)   return "#f59e0b";         // uebergew.
app/modules/doctor-stack/charts/index.js:884: return "#ef4444";                        // adipoes
app/modules/doctor-stack/charts/index.js:890: if (v <= 0.6)  return "#f59e0b";        // erhoeht
app/modules/doctor-stack/charts/index.js:894: // Ein Punkt pro KPI, korrekt eingefaerbt; saubere Separatoren
app/modules/doctor-stack/charts/index.js:1038: // Fuer BP benoetigen wir Meta je Punkt
app/modules/doctor-stack/charts/index.js:1107: // KPIs ( ueber alle Messungen)
app/modules/doctor-stack/charts/index.js:1176: // KPI-Leiste: BMI & WHtR aus dem LETZTEN verfuegbaren Wert
app/modules/doctor-stack/charts/index.js:1240: // Dynamische Groesse
app/modules/doctor-stack/charts/index.js:1434: const aria = `${date} ${ctx} ${valueLabel}`.trim();
app/modules/doctor-stack/charts/index.js:1448: `data-value-label="${esc(valueLabel)}"`,
app/modules/doctor-stack/charts/index.js:1533: `data-value-label="${esc(valueLabel)}"`,
app/modules/doctor-stack/charts/index.js:1536: `aria-label="${esc(valueLabel)}"`
app/modules/doctor-stack/doctor/index.js:102: 'BP-Trend: Wochenmittel ueber Baseline. Baseline {baseline_sys}/{baseline_dia}, aktuell {avg_sys}/{avg_dia}, Delta {delta_sys}/{delta_dia}, Dauer {weeks} Wochen.'
app/modules/doctor-stack/doctor/index.js:106: 'Gewicht-Trend: Wochenmittel ueber Baseline. Baseline {baseline_kg} kg, aktuell {avg_kg} kg, Delta {delta_kg} kg, Dauer {weeks} Wochen.'
app/modules/doctor-stack/doctor/index.js:110: 'Labor-Trend: eGFR/Kreatinin. Baseline {baseline_egfr}/{baseline_creatinine}, aktuell {avg_egfr}/{avg_creatinine}, Delta {delta_egfr}/{delta_creatinine}, Dauer {weeks} Wochen.'
app/modules/doctor-stack/doctor/index.js:257: const ackLabel = entry.ack ? 'Bestaetigt' : 'Offen';
app/modules/doctor-stack/doctor/index.js:277: inner += `<div class="doctor-trendpilot-empty">Trendpilot-Hinweise momentan nicht verfuegbar.</div>`;
app/modules/doctor-stack/doctor/index.js:312: panel.setAttribute('aria-hidden', 'true');
app/modules/doctor-stack/doctor/index.js:856: .map((col) => `<div class="num">${col.value}</div>`)
app/modules/doctor-stack/doctor/index.js:917: <section class="doctor-day doctor-activity-day" data-date="${escapeAttr(dayValue)}">
app/modules/doctor-stack/doctor/index.js:924: <button class="btn ghost" data-del-activity="${escapeAttr(dayValue)}">L�schen</button>
app/modules/doctor-stack/doctor/index.js:977: if (panels.bp) panels.bp.innerHTML = placeholderHtml('Keine Eintraege im Zeitraum.');
app/modules/doctor-stack/doctor/index.js:1030: panels.activity.innerHTML = placeholderHtml('Keine Trainingseintraege im Zeitraum.');
app/modules/doctor-stack/doctor/index.js:1263: candidate = parseDate(`${value}-01T00:00:00Z`);
app/modules/doctor-stack/doctor/index.js:1395: uiError?.('Neuer Monatsbericht fehlgeschlagen.');
app/modules/doctor-stack/doctor/index.js:1416: uiError?.('Neuer Arzt-Bericht fehlgeschlagen.');
app/modules/doctor-stack/doctor/index.js:1540: ? 'Neuer Arzt-Bericht fehlgeschlagen.'
app/modules/doctor-stack/doctor/index.js:1541: : 'Neuer Monatsbericht fehlgeschlagen.');
app/modules/hub/index.js:248: btn.setAttribute('aria-hidden', 'true');
app/modules/hub/index.js:256: prevActive.setAttribute('aria-hidden', 'true');
app/modules/hub/index.js:371: quickbarState.el.setAttribute('hidden', 'true');
app/modules/hub/index.js:373: quickbarState.el.setAttribute('aria-hidden', 'true');
app/modules/hub/index.js:376: quickbarState.handle.setAttribute('aria-expanded', quickbarState.open ? 'true' : 'false');
app/modules/hub/index.js:490: button.setAttribute('aria-hidden', 'true');
app/modules/hub/index.js:543: panel.setAttribute('aria-hidden', 'true');
app/modules/hub/index.js:565: panel.setAttribute('aria-hidden', 'true');
app/modules/hub/index.js:694: panel.setAttribute('aria-hidden', 'true');
app/modules/hub/index.js:1019: diag.add?.(`[hub-chat] stub send: ${value}`);
app/modules/hub/index.js:1100: ref.root.setAttribute('hidden', 'true');
app/modules/hub/index.js:1226: if (hasItems) refs.empty.setAttribute('hidden', 'true');
app/modules/hub/index.js:1467: const value = root.querySelector('[data-pill-value]');
app/modules/hub/index.js:1477: const value = root.querySelector(`[data-${valueAttr}]`);
app/modules/hub/index.js:1554: proteinTarget: buildContextValueRef(contextExtras, 'extra', 'protein-target', 'extra-value'),
app/modules/hub/index.js:1555: ckdStage: buildContextValueRef(contextExtras, 'extra', 'ckd-stage', 'extra-value'),
app/modules/hub/index.js:1559: remaining: buildContextValueRef(contextExpandable, 'expandable', 'remaining', 'expandable-value'),
app/modules/hub/index.js:1560: warning: buildContextValueRef(contextExpandable, 'expandable', 'warning', 'expandable-value'),
app/modules/hub/index.js:1591: assistantChatCtrl.contextExpanded ? 'true' : 'false',
app/modules/hub/index.js:1869: 'System: Du bist ein hilfreicher Ernährungsassistent fuer kurze Essensideen.',
app/modules/hub/index.js:1873: '- 1-2 kurze Vorschläge, insgesamt 2-4 Saetze.',
app/modules/hub/index.js:1920: global.addEventListener('assistant:meal-followup-request', (event) => {
app/modules/hub/index.js:1945: `[assistant-suggest] confirm requested source=${suggestion.source || 'unknown'}`,
app/modules/hub/index.js:1953: global.addEventListener('assistant:action-request', (event) => {
app/modules/hub/index.js:1958: diag.add?.(`[assistant-actions] request type=${type} source=${source}`);
app/modules/hub/index.js:2176: console.error('[assistant-chat] request failed', err);
app/modules/hub/index.js:2222: gastro: ['gastro', 'gastrologe', 'gastrologie', 'gastroenterologe', 'gastroenterologie'],
app/modules/hub/index.js:2637: console.error('[assistant-chat] vision request failed', err);
app/modules/hub/index.js:2783: new CustomEvent('assistant:meal-followup-request', {
app/modules/hub/index.js:2794: diag.add?.('[assistant-followup] meal idea requested');
app/modules/intake-stack/intake/index.js:139: 'Bitte um neues Rezept bzw. Rückmeldung.',
app/modules/intake-stack/intake/index.js:144: return `mailto:${encodeURIComponent(doctorInfo.email)}?${query}`;
app/modules/intake-stack/intake/index.js:398: uiError('Bitte anmelden, um Hinweise zu bestaetigen.');
app/modules/intake-stack/intake/index.js:469: el.setAttribute('aria-invalid','true');
app/modules/intake-stack/intake/index.js:577: const aria = `${p.label}: ${p.value}, Status: ${statusText}`;
app/modules/intake-stack/intake/index.js:578: return `<span class="pill ${p.cls}" role="status" aria-label="${aria}">${p.label}: ${p.value}</span>`;
app/modules/intake-stack/intake/index.js:596: const summary = pills.map(p => `${p.label} ${p.value} (${describe(p.cls)})`).join(', ');
app/modules/intake-stack/intake/index.js:909: uiError('Bitte gueltige Wassermenge eingeben.');
app/modules/intake-stack/intake/index.js:910: diag.add?.('[capture] blocked: invalid water value ' + input.value);
app/modules/intake-stack/intake/index.js:916: uiError(kind === 'salt' ? 'Bitte gueltige Salzmenge eingeben.' : 'Bitte gueltige Proteinmenge eingeben.');
app/modules/intake-stack/intake/index.js:917: diag.add?.(`[capture] blocked: invalid ${kind} value ${input.value}`);
app/modules/intake-stack/intake/index.js:921: diag.add?.(`[capture] parsed ${kind}=${value}`);
app/modules/intake-stack/intake/index.js:1138: panel.setAttribute('aria-hidden', 'true');
app/modules/intake-stack/intake/index.js:1260: // SUBMODULE: clearCaptureIntakeInputs @internal - leert temporaere Intake-Felder vor neuem Save-Lauf
app/modules/intake-stack/medication/index.js:25: cache: new Map(), // key -> dayIso, value -> { data, updatedAt }
app/modules/intake-stack/medication/index.js:26: inflightLoads: new Map(), // key -> dayIso, value -> Promise
app/modules/intake-stack/medication/index.js:611: `Bestandsaenderung fuer ${entry.name || 'Medikation'} (z. B. 10 oder -5)`,
app/modules/intake-stack/medication/index.js:618: updateFormStatus('Ungueltige Menge fuer Restock.');
app/modules/intake-stack/medication/index.js:636: `Neuer Bestand fuer ${entry.name || 'Medikation'}`,
app/modules/intake-stack/medication/index.js:651: updateFormStatus(`Bestand auf ${Math.trunc(value)} gesetzt.`);
app/modules/intake-stack/medication/index.js:684: `Medikament ${entry.name || ''} dauerhaft löschen? Diese Aktion kann nicht rueckgaengig gemacht werden.`
app/modules/intake-stack/medication/index.js:690: updateFormStatus('Medikament geloescht.');
app/modules/intake-stack/medication/index.js:701: '<p class="muted small">Keine Medikamente vorhanden. Bitte lege oben ein neues an.</p>';
app/modules/vitals-stack/trendpilot/index.js:99: 'Blutdruck-Wochenmittel ueber Baseline ({baseline_sys}/{baseline_dia}). Aktuell {avg_sys}/{avg_dia} (Delta {delta_sys}/{delta_dia}) seit {window_from}.',
app/modules/vitals-stack/trendpilot/index.js:101: 'BP-Trend: Wochenmittel ueber Baseline. Baseline {baseline_sys}/{baseline_dia}, aktuell {avg_sys}/{avg_dia}, Delta {delta_sys}/{delta_dia}, Dauer {weeks} Wochen.'
app/modules/vitals-stack/trendpilot/index.js:105: 'Gewicht-Wochenmittel ueber Baseline ({baseline_kg} kg). Aktuell {avg_kg} kg (Delta {delta_kg} kg) seit {window_from}.',
app/modules/vitals-stack/trendpilot/index.js:107: 'Gewicht-Trend: Wochenmittel ueber Baseline. Baseline {baseline_kg} kg, aktuell {avg_kg} kg, Delta {delta_kg} kg, Dauer {weeks} Wochen.'
app/modules/vitals-stack/trendpilot/index.js:111: 'Labor-Trend auffaellig (eGFR/Kreatinin). Aktuell {avg_egfr}/{avg_creatinine}, Delta {delta_egfr}/{delta_creatinine} seit {window_from}.',
app/modules/vitals-stack/trendpilot/index.js:113: 'Labor-Trend: eGFR/Kreatinin. Baseline {baseline_egfr}/{baseline_creatinine}, aktuell {avg_egfr}/{avg_creatinine}, Delta {delta_egfr}/{delta_creatinine}, Dauer {weeks} Wochen.'
app/modules/vitals-stack/trendpilot/index.js:163: ? 'Bitte aerztliche Klaerung empfohlen.'
app/modules/vitals-stack/trendpilot/index.js:177: card.setAttribute('aria-modal', 'true');
app/modules/vitals-stack/vitals/body.js:82: uiError(`Bitte gueltigen Wert fuer ${label} (0-100 %) eingeben.`);
app/modules/vitals-stack/vitals/bp.js:92: el.setAttribute("aria-invalid", "true");
app/modules/vitals-stack/vitals/index.js:85: panel.setAttribute('aria-hidden', 'true');
app/modules/vitals-stack/vitals/index.js:120: panel.setAttribute('aria-hidden', 'true');
app/supabase/api/intake.js:69: // SUBMODULE: loadIntakeToday @public - lädt Intake-Daten für den aktuellen Tag (REST-Query)
app/supabase/api/intake.js:255: // SUBMODULE: cleanupOldIntake @public - löscht alte Intake-Einträge (vor aktuellem Tag)
app/supabase/api/notes.js:117: // SUBMODULE: fallback-note @internal - PATCH falls vorhanden, sonst POST neue Notiz
app/supabase/api/notes.js:143: uiError('Es gibt bereits einen Eintrag fuer diesen Tag/Kontext.');
app/supabase/api/notes.js:145: uiError('Eingaben ungueltig - bitte Wertebereiche/Pflichtfelder pruefen.');
app/supabase/api/notes.js:164: uiError('Unerwartete Antwort vom Server - kein Datensatz zurueckgegeben.');
app/supabase/api/notes.js:170: uiError('Netzwerkfehler beim Speichern. Bitte spaeter erneut versuchen.');
app/supabase/api/notes.js:177: // SUBMODULE: appendNoteRemote @public - fügt neuen Notiztext an bestehenden Tageskommentar an
app/supabase/api/vitals.js:29: // SUBMODULE: calcMAPValue @internal - Wrapper um globale calcMAP mit Fehlerabsicherung
app/supabase/api/vitals.js:45: // SUBMODULE: normalizeBpCtx @internal - toleriert alte/neue ctx-Werte aus Views
app/supabase/api/vitals.js:203: // calcMAPValue should already guard, but keep this to be defensive
app/supabase/api/vitals.js:205: `[vitals] calcMAPValue error for day=${row.day} ctx=${row.ctx}: ${err?.message || err}`
app/supabase/auth/core.js:344: diag.add?.('[capture] guard: request session');
app/supabase/auth/core.js:354: // SUBMODULE: requireSession @public - prüft aktuelle Session und aktualisiert UI
app/supabase/auth/core.js:465: // SUBMODULE: getUserId @public - ermittelt aktuelle User-ID mit Timeout & Fallbacks
app/supabase/auth/guard.js:85: diag.add?.('Supabase guard: getRandomValues failed - ' + (err?.message || err));
app/supabase/auth/guard.js:276: // SUBMODULE: UI helpers @internal - Overlay-Steuerung & Statusanzeige
app/supabase/auth/guard.js:295: ? 'Bitte zuerst Passkey einrichten.'
app/supabase/auth/guard.js:296: : 'Passkey/WebAuthn nicht verfuegbar.';
app/supabase/auth/guard.js:345: overlay.setAttribute('data-supabase-pin-overlay', 'true');
app/supabase/auth/guard.js:349: dialog.setAttribute('aria-modal', 'true');
app/supabase/auth/guard.js:363: desc.textContent = 'Bitte eine 4 bis 10-stellige PIN festlegen. Die PIN wird verschluesselt gespeichert.';
app/supabase/auth/guard.js:374: label.textContent = 'Neue PIN';
app/supabase/auth/guard.js:542: chartBtn.title = enabled ? 'Werte als Grafik' : 'Bitte zuerst anmelden';
app/supabase/auth/guard.js:590: message: 'Passkey / Windows Hello ist nicht verfuegbar - bitte PIN verwenden.'
app/supabase/auth/guard.js:617: // SUBMODULE: registerPasskey @internal - registriert neuen Passkey via WebAuthn
app/supabase/auth/guard.js:638: throw new Error('WebAuthn nicht verfuegbar.');
app/supabase/auth/guard.js:657: setLockMsg('Geraet unterstuetzt keinen plattformweiten Passkey - versuche Standardmodus...');
app/supabase/auth/guard.js:666: setLockMsg('Bitte zuerst bei Supabase anmelden.');
app/supabase/auth/ui.js:63: // SUBMODULE: uiCore @internal - Zugriff auf Fokussteuerung (Focus Trap)
app/supabase/auth/ui.js:143: // SUBMODULE: show/hide overlay @public - steuert Sichtbarkeit des Login-Overlays
app/supabase/auth/ui.js:184: setConfigStatus('REST-Endpoint ist keine gueltige URL.', 'error');
app/supabase/auth/ui.js:189: setConfigStatus('service_role Schluessel sind nicht erlaubt.', 'error');
app/supabase/core/client.js:36: diag.add?.('Supabase Client: window.getConf ist nicht verfuegbar');
app/supabase/core/client.js:105: setConfigStatusSafe('service_role Schluessel sind nicht erlaubt.', 'error');
app/supabase/core/client.js:113: setConfigStatusSafe('REST-Endpoint ist ungueltig.', 'error');
app/supabase/core/client.js:114: diag.add('Supabase Auth: ungueltige URL');
app/supabase/core/client.js:118: setConfigStatusSafe('ANON-Key ist ungueltig.', 'error');
app/supabase/core/client.js:119: diag.add('Supabase Auth: ungueltiger Key');
app/supabase/core/client.js:125: diag.add('Supabase Auth: window.supabase.createClient nicht verfuegbar');
app/supabase/core/http.js:62: diag.add?.(`[auth] request start ${label}`);
app/supabase/core/http.js:70: `[auth] request end ${label} status=200 avg=${avg} ms (x${summary.successCount})`
app/supabase/core/http.js:103: diag.add?.(`[auth] request end ${label} status=${status} (${durationMs} ms)${suffix}`);
app/supabase/core/http.js:141: // Hilfsfunktionen: Auth-Refresh und Signalsteuerung
app/supabase/core/http.js:150: diag.add?.(`[auth] refresh start ${tag || 'request'}`);
app/supabase/core/http.js:156: diag.add?.(`[auth] refresh end ${tag || 'request'}`);
app/supabase/core/http.js:167: // Request-Ausführung mit Timeout und Wiederholungen
app/supabase/core/http.js:184: const reqLabel = tag || 'request';
app/supabase/core/http.js:192: // Per-request soft timeout to avoid hanging saves (e.g., after resume)
app/supabase/core/http.js:199: reject(new Error('request-timeout'));
app/supabase/core/http.js:207: diag.add?.(`[auth] late error ${tag || 'request'}: ${err?.message || err}`);
app/supabase/core/http.js:217: diag.add?.(`[auth] ${tag || 'request'} timeout (${Math.round(dur)} ms)`);
app/supabase/core/http.js:253: diag.add?.(`[auth] ${tag || 'request'} ${res.status} -> refresh`);
app/supabase/core/state.js:28: // SUBMODULE: header cache utilities @public - steuert Cache und Promise-Verwaltung
app/supabase/index.js:187: // SUBMODULE: enqueueReadyDispatch @internal - führt Eventdispatch asynchron (microtask-basiert) aus
app/supabase/realtime/index.js:230: diag.add?.('[resume] ui refresh requested');
app/supabase/realtime/index.js:280: // SUBMODULE: toEventsUrl @public - ersetzt REST-Endpunkt durch health_events-Ressource
assets/js/data-local.js:121: // SUBMODULE: wrapIDBRequest @internal - generischer Handler für IDB Request/Transaktions-Fluss
assets/js/data-local.js:127: *           resolveOn?: 'request' | 'txcomplete',
assets/js/data-local.js:131: function wrapIDBRequest(tx, req, { onSuccess, actionName, resolveOn = 'request', onAbortResolve } = {}) {
assets/js/data-local.js:161: if (resolveOn === 'request') {
assets/js/data-local.js:166: // if resolveOn === 'txcomplete', we just store lastValue and let tx.oncomplete resolve
assets/js/data-local.js:177: fail(reject, e, `${actionName} request failed`);
assets/js/data-local.js:230: // für Writes: resolveOn 'request' genügt; tx-Handler fungieren als Fallback
assets/js/data-local.js:231: resolveOn: 'request'
assets/js/data-local.js:245: resolveOn: 'request'
assets/js/data-local.js:322: resolveOn: 'request'
assets/js/data-local.js:360: resolveOn: 'request'
assets/js/data-local.js:373: resolveOn: 'request'
assets/js/data-local.js:385: resolveOn: 'request'
assets/js/main.js:487: // SUBMODULE: UI Refresh Core @public - steuert UI-Neuladen (Doctor/Chart/Capture)
assets/js/main.js:626: // kleines visuelles Ping bei Realtime
assets/js/main.js:723: // Nur visuelles Dimmen; die Save-Logik prueft isLoggedIn() ohnehin.
assets/js/main.js:734: chartBtn.title = enabled ? 'Werte als Grafik' : 'Bitte zuerst anmelden';
assets/js/main.js:739: monthlyBtn.title = enabled ? 'Manuellen Monatsbericht starten' : 'Bitte zuerst anmelden';
assets/js/main.js:741: // Lifestyle-Tab mitsteuern
assets/js/main.js:1024: // SUBMODULE: clearFieldError @internal - entfernt visuelle Fehlerzustaende von Intake-Feldern
assets/js/main.js:1035: el.setAttribute('aria-invalid','true');
assets/js/main.js:1132: const summary = pills.map(p => `${p.label} ${p.value} (${describe(p.cls)})`).join(', ');
assets/js/main.js:1135: const aria = `${p.label}: ${p.value}, Status: ${statusText}`;
assets/js/main.js:1136: return `<span class="pill ${p.cls}" role="status" aria-label="${aria}"><span class="dot" aria-hidden="true"></span>${p.label}: ${p.value}</span>`;
assets/js/main.js:1186: // SUBMODULE: maybeResetIntakeForToday - ensures zeroed intake when day rolls over
assets/js/main.js:1239: uiError?.('Intake konnte nicht automatisch zurueckgesetzt werden. Bitte erneut versuchen.');
assets/js/main.js:1353: // Tageswechsel erkannt -> Intake ggf. automatisch auf 0 zuruecksetzen
assets/js/main.js:1502: uiError('Keine Daten fuer diesen Messzeitpunkt eingegeben.');
assets/js/main.js:1530: // Diagnostics only: continue to let fetchWithAuth handle auth refresh.
assets/js/main.js:1541: uiError('Keine Koerperdaten eingegeben.');
assets/js/main.js:1549: diag.add?.('Panel Koerper Fehler: ' + (err?.message || err));
assets/js/main.js:1557: flashButtonOk(btn, '&#x2705; Koerper gespeichert');
assets/js/main.js:1631: activityFormStatus.textContent = 'Dauer muss mindestens 1 Minute sein.';
assets/js/main.js:1661: // was du beim Datum aendern haben willst:
assets/js/main.js:1702: diag.add?.('[doctor] chart show requested');
assets/js/ui-tabs.js:58: // SUBMODULE: setTab @public - steuert aktiven Tab inkl. Doctor-Auth, Unlock und UI-Refresh
assets/js/ui-tabs.js:80: // Atomare Entscheidung im Queue-Kontext
assets/js/ui.js:45: // SUBMODULE: helpPanel @public - steuert das Inline-Hilfe-Overlay mit Open/Close-Logik
assets/js/ui.js:135: el.setAttribute('aria-hidden', 'true');
assets/js/ui.js:249: root.setAttribute('aria-modal', 'true');
assets/js/ui.js:291: try { newTop.root.setAttribute('aria-modal', 'true'); } catch (_) {}