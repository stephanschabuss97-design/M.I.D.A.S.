/**
 * MODULE: assets/css/ui/doctor-view.css
 * Description: Enthält das komplette Layout- und Styling-System für die Arztansicht – inkl. Toolbar, KPI-Badges, Tages-Grid und responsive Spalten.
 * Submodules:
 *  - Toolbar & KPI Badges
 *  - Doctor Day Grid Layout (3-Spalten-Struktur)
 *  - Columns (Date, Measurements, Special)
 *  - Notes Styling
 *  - Responsive Layout (Tablet & Mobile)
 *  - Placeholders & Empty States
 */


/* SUBMODULE: Toolbar & KPI Badges @public - Kopfzeile mit Titel, Datumsauswahl und Tageskennzahlen */
#doctorCard .toolbar {
  display:flex;
  align-items:center;
  gap:8px;
  flex-wrap:wrap;
  justify-content:space-between; /* Titel links + Mitte + Badges rechts */
  border-bottom:1px solid #242833;
  padding-bottom:8px;
  margin-bottom:8px;
}

#doctorCard .toolbar .center-group {
  flex:1;
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  align-items:center;
  justify-content:center; /* Buttons + Datum + Anwenden mittig */
}

#doctorCard .toolbar .badge {
  margin-left:8px;
}

/* SUBMODULE: KPI Badges Styles @public - visuelle Kennzeichnung guter/schlechter Tageswerte */
.badge {
  display:inline-block;
  padding:6px 12px;         /* etwas mehr Platz */
  border:1.5px solid #2b2f3a;
  border-radius:12px;       /* runder = moderner */
  font-size:13px;           /* +1pt groesser */
  font-weight:600;          /* kraeftiger */
  margin-left:10px;
}
.badge.good{border-color:var(--color-success); color:var(--color-success)}
.badge.bad{ border-color:var(--color-danger); color:var(--color-danger)}
.badge.hidden{ display:none !important; }

/* SUBMODULE: Trendpilot Section @public - listet Regel-Hinweise + Aktionen */
.doctor-trendpilot{
  border:1px solid #242833;
  border-radius:12px;
  padding:12px 14px;
  margin-bottom:12px;
  background:var(--color-surface-card);
  box-shadow:0 4px 12px rgba(0,0,0,.2);
}
.doctor-trendpilot-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
  margin-bottom:6px;
}
.doctor-trendpilot-list{
  display:flex;
  flex-direction:column;
  gap:10px;
}
.doctor-trendpilot-empty{
  font-size:13px;
  opacity:.75;
  padding:4px 0;
}
.tp-row{
  border:1px solid #2f3442;
  border-radius:10px;
  padding:10px 12px;
  background:rgba(15,19,29,.9);
  display:flex;
  flex-direction:column;
  gap:8px;
}
@media (min-width:820px){
  .tp-row{
    flex-direction:row;
    align-items:flex-start;
    justify-content:space-between;
  }
  .tp-text{ flex:1; }
}
.tp-meta{
  display:flex;
  align-items:center;
  flex-wrap:wrap;
  gap:8px;
  font-size:13px;
  font-weight:600;
}
.tp-badge{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:2px 8px;
  border-radius:999px;
  font-size:12px;
  font-weight:600;
  border:1px solid transparent;
}
.tp-badge.is-warning{
  background:rgba(250,204,21,.12);
  border-color:rgba(250,204,21,.45);
  color:var(--color-warning);
}
.tp-badge.is-critical{
  background:rgba(220,38,38,.12);
  border-color:rgba(220,38,38,.5);
  color:var(--color-danger);
}
.tp-badge.is-info{
  background:rgba(59,130,246,.12);
  border-color:rgba(59,130,246,.35);
  color:var(--color-primary);
}
.tp-ack{
  font-size:12px;
  padding:2px 6px;
  border-radius:6px;
  font-weight:600;
}
.tp-ack.is-ack{
  background:rgba(34,197,94,.18);
  color:var(--color-success);
}
.tp-ack.is-open{
  background:rgba(220,38,38,.18);
  color:var(--color-danger);
}
.tp-text{
  font-size:13px;
  line-height:1.35;
  color:var(--color-text);
}
.tp-status{
  font-size:12px;
  opacity:.8;
}
.tp-actions{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
}
.tp-actions .btn{
  padding:4px 10px;
  font-size:12px;
  line-height:1.2;
}
.tp-actions .btn.is-active{
  border-color:var(--color-primary);
  color:var(--color-primary);
}
.tp-row.is-loading{
  opacity:.6;
  pointer-events:none;
}

/* SUBMODULE: Doctor Day Grid Layout @public - Hauptlayout je Tagesblock (responsive Grid-Struktur) */
.doctor-view .doctor-day{
  display:grid;
  grid-template-columns:1fr; /* Standard = gestapelt */
  gap:12px;
  align-items:start;
  padding:12px 14px;
  margin:8px 0;
  border-radius:12px;
  background:var(--color-surface-card);
  border:1px solid #242833;
  box-shadow:0 6px 18px rgba(0,0,0,.25);
  page-break-inside:avoid;
  break-inside:avoid;
}

/* Tablet/Desktop: nebeneinander */
@media (min-width:900px){
  .doctor-view .doctor-day{
    grid-template-columns:18% 46% 36%;
  }
}

/* Zwischenbereich: 2 Spalten */
@media (min-width:600px) and (max-width:899px){
  .doctor-view .doctor-day{
    grid-template-columns:40% 60%;
    grid-template-areas:
      "date measure"
      "date special";
  }
  .doctor-view .col-date{ grid-area:date; }
  .doctor-view .col-measure{ grid-area:measure; }
  .doctor-view .col-special{ grid-area:special; }
}

/* SUBMODULE: Column A (Date) @internal - Datum, Wolkensymbol und Aktionen */
.doctor-view .col-date{
  display:flex;
  flex-direction:column;
  gap:6px;
  align-items:center;
  font-weight:800;
  font-size:clamp(16px,1.6vw,20px);
  letter-spacing:.2px;
}
.doctor-view .col-date .date-top{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
}
.doctor-view .col-date .date-label{
  font-weight:800;
  font-size:clamp(16px,1.6vw,20px);
  letter-spacing:.2px;
}
.doctor-view .col-date .date-cloud{ font-size:16px; line-height:1; }
.doctor-view .col-date .date-actions{
  display:flex;
  justify-content:flex-start; /* oder center, wenn du's mittig magst */
}
/* SUBMODULE: Column B (Measurements) @internal - Blutdruck, Puls und MAP */
.doctor-view .col-measure{ display:grid; grid-template-rows:auto 1fr; gap:6px; }
.doctor-view .measure-head,
.doctor-view .measure-grid{
  display:grid;
  grid-template-columns:minmax(70px, auto) repeat(5, 1fr);
  gap:4px;
}
.doctor-view .measure-head{ font-size:12px; opacity:.8; }

.doctor-view .measure-head > div{ display:flex; align-items:center; }
.doctor-view .measure-head > div:first-child{ justify-content:flex-start; }
.doctor-view .measure-head > div:not(:first-child){ justify-content:flex-end; }
.doctor-view .measure-row{ display:contents; }
.doctor-view .label{ display:flex; align-items:center; font-size:13px; opacity:.9; }

.doctor-body-day .doctor-body-metrics .measure-head,
.doctor-body-day .doctor-body-metrics .measure-grid{
  grid-template-columns:minmax(70px, auto) repeat(4, minmax(110px, 1fr));
}
.doctor-body-day .doctor-body-metrics .measure-head > div{
  white-space:nowrap;
}
.doctor-body-day .doctor-body-metrics .measure-head > div:not(:first-child){
  justify-content:center;
  text-align:center;
}
.doctor-body-day .doctor-body-metrics .measure-row .num{
  justify-content:center;
  text-align:center;
}

/* Zahlenbild */
.doctor-view .num{
  font-variant-numeric:tabular-nums lining-nums;
  -moz-font-feature-settings:"tnum","lnum";
  -webkit-font-feature-settings:"tnum","lnum";
  font-feature-settings:"tnum","lnum";
  text-align:right;
  display:flex;
  align-items:center;
  justify-content:flex-end;
  min-width:4ch; /* Basisschutz gegen Abschneiden */
  white-space:nowrap;
}
.doctor-view .num.alert{ color:var(--color-danger); }

.doctor-view .measure-grid .num,
.doctor-view .col-special .num{
  text-align:right;
  justify-content:flex-end;
}

/* SUBMODULE: Column C (Special Info) @internal - Gewicht, Bauchumfang und Notizen */
.doctor-view .weight-line,
.doctor-view .waist-line{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:4px;
  background:transparent;
  border:none;
  padding:0;
  font-weight:600;
}

.doctor-view .weight-line > :first-child,
.doctor-view .waist-line > :first-child{
  font-size:12px;
  opacity:.8;
  font-weight:600;
  letter-spacing:.2px;
}

.doctor-view .weight-line .num,
.doctor-view .waist-line .num{
  font-size:clamp(16px,1.6vw,20px);
  font-weight:700;
  line-height:1.1;
  text-align:center;
}

.doctor-view .col-special{
  display:grid;
  grid-template-columns:minmax(160px, max-content) 1fr;
  column-gap:16px;
  row-gap:6px;
  align-items:start;
}

.doctor-day:not(.doctor-body-day) .col-special{
  display:block;
}

.doctor-view .col-special > .weight-line,
.doctor-view .col-special > .waist-line { grid-column:1; }
.doctor-view .col-special > .notes       { grid-column:2; }

.doctor-view .weight-line .num,
.doctor-view .waist-line .num{ font-variant-numeric:tabular-nums; }

.doctor-view .notes{
  font-size:13px;
  line-height:1.35;
  display:-webkit-box;
  -webkit-line-clamp:3;      /* 3 Zeilen, bei Bedarf 2 setzen */
  -webkit-box-orient:vertical;
  overflow:hidden;
  word-break:break-word;
  padding:0;                 /* kein Box-Feeling */
  background:transparent;
  border:none;
}
.doctor-view .notes::before{
  content:"Kommentar";
  display:block;
  font-size:12px;
  opacity:.8;
  font-weight:600;
  letter-spacing:.2px;
  margin-bottom:4px;
}

/* SUBMODULE: Responsive Layout @public - Anpassungen für Tablets und Smartphones */
@media (max-width:599px){
  .doctor-view .measure-head,
  .doctor-view .measure-grid{
    grid-template-columns:minmax(72px, 1fr) repeat(5, minmax(56px, 1fr));
  }
  .doctor-view .measure-head{ font-size:11px; }

  .doctor-view .num{
    min-width:4.5ch; /* ~ "96.7" passt sicher */
    white-space:nowrap;
    flex:0 0 auto;
  }
  .doctor-view .col-special .weight-line .num,
  .doctor-view .col-special .waist-line .num{
    min-width:5ch;
  }

  .doctor-view .col-special{
    grid-template-columns:minmax(110px, max-content) 1fr;
    column-gap:12px;
  }
  .doctor-view .col-special > .notes{
    grid-column:1 / -1;
  }
  .doctor-view .notes{
    -webkit-line-clamp:4; /* bei Bedarf auf 5 erhoehen */
  }

}

/* SUBMODULE: Placeholders & Empty States @public - Anzeige bei fehlenden Daten oder Sperrzustand */
.u-doctor-placeholder{ text-align:center; opacity:.7; padding:12px; }
.doctor-tabs {
  display: flex;
  gap: 8px;
  margin-bottom: 12px;
  flex-wrap: wrap;
}

.doctor-tabs .btn {
  min-width: 70px;
}

.doctor-tabs .btn.is-active {
  border-bottom: 2px solid var(--accent, #4f9dff);
}

.doctor-view {
  position: relative;
}

.doctor-tab-panel {
  display: none;
}

.doctor-tab-panel.is-active {
  display: block;
}

.doctor-inbox-panel {
  left: 50%;
  right: auto;
  top: 50%;
  bottom: auto;
  transform: translate(-50%, -50%);
  width: min(640px, calc(100% - 32px));
  max-height: 85vh;
  background: var(--color-surface-card, #0f1116);
  border-radius: 18px;
  box-shadow: 0 18px 48px rgba(0, 0, 0, 0.55);
}

.doctor-inbox-panel .content {
  padding: 16px;
}

.doctor-inbox {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.doctor-inbox-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
}

.doctor-inbox-actions {
  display: flex;
  align-items: center;
  gap: 12px;
}

.doctor-inbox-actions .btn {
  font-size: 12px;
  padding: 4px 10px;
}

.doctor-report-card {
  border: 1px solid #242833;
  border-radius: 12px;
  padding: 14px 16px;
  background: var(--color-surface-card);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
}

.doctor-report-head {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 12px;
  margin-bottom: 8px;
  font-size: 13px;
}

.doctor-report-period strong {
  display: block;
  font-size: 16px;
}

.doctor-report-meta {
  font-size: 12px;
  opacity: 0.75;
  text-align: right;
}

.doctor-report-summary {
  font-weight: 600;
  margin-bottom: 8px;
}

.doctor-report-summary span.report-flag {
  display: inline-block;
  margin-left: 6px;
  padding: 2px 6px;
  border-radius: 999px;
  background: var(--color-warning, #f4c15d);
  color: #121417;
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
}

.doctor-report-body {
  font-size: 13px;
  line-height: 1.4;
  opacity: 0.95;
  word-break: break-word;
}

.doctor-report-body .report-empty {
  margin: 0;
  font-style: italic;
  opacity: 0.7;
}

.doctor-report-body p {
  margin: 0 0 6px 0;
}

.doctor-report-body ul {
  margin: 0;
  padding-left: 18px;
}

.doctor-report-body li {
  margin-bottom: 4px;
}

.doctor-report-actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  margin-top: 10px;
}

.doctor-report-actions .btn {
  font-size: 12px;
  padding: 4px 10px;
}
